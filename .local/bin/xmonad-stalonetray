#!/usr/bin/env sh

icons=10
slotSize=28
primaryHorizontalOffset=$(xrandr -q | rg ' connected primary' | cut -d' ' -f4 | sed 's/[x]/\+/g' | cut -d'+' -f 1,3 | bc -l)
stalonetrayOffset=$(expr "$primaryHorizontalOffset" - "$icons" \* "$slotSize")
stalonetrayPID=$(pidof stalonetray)

if [ $? -eq 0 ]; then
  kill $stalonetrayPID
fi

stalonetray --geometry "$icons"x1+"$stalonetrayOffset"+2  --config ~/.config/stalonetrayrc

